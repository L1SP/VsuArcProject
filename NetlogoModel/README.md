# Краткая документация по проекту
## Расширения, глобальные переменные и свойства агентов и участков
- extensions [gis] - расширение для интеграции ГИС
- globals [dataset] - глобальная переменная для хранения датасета ГИС
- patches-own [patch-defence-factor copper-at-patch cattle-at-patch is-accessible] - свойства участков: коэффициент защищенности, количество меди, количество скота и доступность для посещения агентом
- turtles-own [population copper-at-agent cattle-at-agent] - свойства агентов: популяция, количество меди, количество скота
## Инициализация
### Инициализация ГИС (to init-gis)
- Инициализируем переменную dataset данными из ГИС с названием "bronze-map.shp"
- Устанавливаем для всех участков is-accessible = false (недоступность для посещения)
- Устанавливаем для каждого участка, пересекающего полигон из ГИС, свойства соответствующего полигона, для этого считываем свойства "cattle", "copper" и "settlement", записываем данные в "cattle-at-patch" и "copper-at-patch" соответственно, и добавляем 1 агента на полигон, в зависимости от значения "settlement" (true - да, false - нет)
### Инициализация участков (to init-patches)
- Устанавливаем каждому участку случайный коэффициент защищенности от 0.5 до 2.0. В идеале было бы доработать эту часть, добавив полигонам в ГИС свойство "тип местности", и в блоке с инициализацией ГИС по типу местности присваивать участкам на полигонах соответствующий такому типу коэффициент защищенности.
### Инициализация агентов (to init-turtles)
- Устанавливаем каждому агенту популяцию от 50 до 80
- Устанавливаем каждому агенту количество скота от 2 до 7
### Инициализация глобальных переменных (to init-globals)
- Устанавливаем форму для агентов по умолчанию = "person"
- Устанавливаем размеры мира 10x10 участков
- Инициализируем ГИС (вызываем init-gis)
### Инициализация (to init)
- Очищаем все данные
- Обнуляем тики (ticks)
- Устанавливаем фиксированный seed для генератора случайных чисел = 2024
- Инициализируем глобальные переменные (вызываем init-globals)
- Инициализируем участки (вызываем init-patches)
- Инициалищируем агентов (вызываем init-turtles)
## Шаг симуляции (to step)
### Сбор ресурсов
- Если на участке есть и медь(copper-at-patch), и агент, тогда у участка количества меди уменьшается на 1, а у агента количества меди(copper-at-agent) увеличивается на 1
- Если на участке есть и скот(cattle-at-patch), и агент, тогда у участка количества скота уменьшается на 1, а у агента количества скота(cattle-at-agent) увеличивается на 1
### Конфликты агентов
- Для каждого живого агента проверяем наличие соседей
  - Если соседи есть - происходит конфликт (вызываем fight-neighbors)
  - Если соседей нет и скота(cattle-at-agent) > 2, тогда население (population) увеличивается на 5% с округлением вверх
  - Если соседей нет и скота(cattle-at-agent) <= 2, тогда население (population) уменьшается на 5% с округлением вниз
### Перемещение агентов
- Если агент не участвовал в конфликте и количество меди на участке = 0 (copper-at-patch) - агент перемещается на соседний участок с наибольшим количеством меди (вызываем move-to-better-copper-place)
- Иначе если агент не участвовал в конфликте и количество скота на участке = 0 (cattle-at-patch) - агент перемещается на соседний участок с наибольшим количеством меди (вызываем move-to-better-cattle-place)
### Продолжение(завершение) симуляции
- Добавляем тик (tick)
- Если остался только 1 агент - останавливаем симуляцию
